(this["webpackJsonpreact-redux-e-commerce"]=this["webpackJsonpreact-redux-e-commerce"]||[]).push([[7],{158:function(e,t,n){"use strict";var r=n(0),a=n.n(r);t.a=a.a.memo((function(e){var t=e.value;return a.a.createElement("span",null,"".concat(Math.floor(t/100),",").concat(t%100<10?"0".concat(t%100):t%100," \u20ac"))}))},159:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));var r=n(49),a=function(e){return{type:r.a.setItems,payload:{items:e}}},c=function(e){return{type:r.a.addItem,payload:{item:e}}},u=function(e){return{type:r.a.removeItem,payload:{item:e}}}},161:function(e,t,n){"use strict";var r=n(8),a=n(0),c=n.n(a);t.a=function(e){var t=e.title,n=e.src,a=e.style;return c.a.createElement("img",{style:Object(r.a)({maxWidth:"100%",maxHeight:"100%",boxShadow:"1px 0px 3px grey"},a),src:n,alt:"".concat(t)})}},164:function(e,t,n){"use strict";var r=n(35),a=n(8),c=n(26),u=n(65),i=n(15),o=n.n(i),l=n(25),s=n(21),d=n(64),f=Object(d.a)("orders"),p=f.getItems,m=f.createItems,y=f.updateItems,v=p,b=m,x=y,E=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:return n=e.sent,e.abrupt("return",n.filter((function(e){return e.buyer.id===t})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=n(159),h=function(e){return{type:s.a.setOrders,payload:{orders:e}}},j=function(e){return{type:s.a.addOrder,payload:{order:e}}},g=function(e){return{type:s.a.updateOrders,payload:{orders:e}}},w=function(){return{type:s.a.fetchStart}},C=function(){return{type:s.a.fetchEnd}},k=function(e){return function(){var t=Object(l.a)(o.a.mark((function t(n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(w()),t.prev=1,t.next=4,E(e);case 4:r=t.sent,n(h(r)),n(C()),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0),n(C());case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},T=function(e){return function(){var t=Object(l.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(w()),t.prev=1,t.next=4,x(e);case 4:n(g(e)),n(C()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0),n(C());case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},I=n(44),S=n(0),W=n(18);n.d(t,"d",(function(){return A})),n.d(t,"c",(function(){return L})),n.d(t,"a",(function(){return q})),n.d(t,"b",(function(){return D}));var A=function(){return Object(c.c)((function(e){return e.orders}))},L=function(){var e=Object(c.b)(),t=Object(W.f)(),n=Object(I.b)().me;return{createOrder:function(r){return n&&n.id?e((a={id:Object(u.uuid)(),buyer:{id:n.id,name:n.name,surname:n.surname,username:n.username},status:s.b.created,items:r},function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(w()),e.prev=1,e.next=4,b([a]);case 4:n=e.sent,t(j(n[0])),t(Object(O.c)([])),t(C()),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),t(C());case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}())):t.push("/login");var a},cancelOrder:function(t){return e(T([Object(a.a)({},t,{status:s.b.canceled})]))},dispatchOrder:function(t){return e(T([Object(a.a)({},t,{status:s.b.dispatched})]))},completeOrder:function(t){return e(T([Object(a.a)({},t,{status:s.b.completed})]))},updateOrder:function(t){return e(T([t]))}}},q=function(){var e=Object(c.b)(),t=Object(I.b)(),n=Object(c.c)((function(e){return e.orders}));return Object(S.useEffect)((function(){!n.hasLoaded&&!n.loading&&t.me&&t.me.id&&e(k(t.me.id))})),Object(a.a)({},n,{loading:t.loading||n.loading})},D=function(e){var t=Object(S.useState)(!1),n=Object(r.a)(t,2),a=n[0],u=n[1],i=Object(c.b)(),o=Object(c.c)((function(e){return e.orders})),l=o.orders,s=o.loading,d=o.hasLoaded;return Object(S.useEffect)((function(){!e||a||s||(u(!0),i(k(e)))}),[e,s,i,a]),{orders:l,loading:s,hasLoaded:d}}},167:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=n(149),u=n(158);t.a=a.a.memo((function(e){var t=e.value,n=e.label,r=void 0===n?"Price: ":n;return a.a.createElement(c.a,{style:{fontWeight:700},noWrap:!0,variant:"subtitle2",color:"primary"},r,a.a.createElement(u.a,{value:t}))}))},191:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(164),u=n(146),i=n(155),o=n(35),l=n(115),s=n(148),d=function(e){var t=e.orderId;return a.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},a.a.createElement("div",{style:{textTransform:"uppercase",fontWeight:700}},"Order: "),a.a.createElement("div",null,t))},f=function(){return a.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",fontStyle:"italic",borderBottom:"1px solid gray"}},a.a.createElement("div",{style:{textTransform:"uppercase",flex:1}},"Created At"),a.a.createElement("div",{style:{textTransform:"uppercase",flex:1}},"Status "),a.a.createElement("div",{style:{textTransform:"uppercase",flex:1,display:"flex",justifyContent:"flex-end"}},"Price"))},p=n(158),m=function(e){var t=e.createdAt,n=e.status,r=e.price;return a.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:600,paddingTop:4}},a.a.createElement("div",{style:{textTransform:"uppercase",flex:1}},t," "),a.a.createElement("div",{style:{textTransform:"uppercase",flex:1}},n," "),a.a.createElement("div",{style:{textTransform:"uppercase",flex:1,display:"flex",justifyContent:"flex-end"}},a.a.createElement(p.a,{value:parseInt("".concat(r))})))},y=n(161),v=n(167),b=function(e){var t=e.items;return a.a.createElement("div",{style:{paddingTop:20}},t.map((function(e){return a.a.createElement("div",{key:e.id,style:{display:"flex",padding:"10px 0"}},a.a.createElement(y.a,{style:{width:100,height:140},src:e.image,title:e.title}),a.a.createElement("div",{style:{paddingLeft:10,display:"flex",flexDirection:"column",justifyContent:"space-between"}},a.a.createElement("div",null,a.a.createElement("div",{style:{fontWeight:700}},e.title),a.a.createElement("div",{style:{paddingTop:4,color:"#7A7878"}},e.author),a.a.createElement("div",{style:{color:"#7A7878"}},e.publishedDate)),a.a.createElement("div",null,a.a.createElement("div",null,"Count: ",e.quantity),a.a.createElement(v.a,{value:e.price*e.quantity}))))})))},x=n(56),E=n(69),O=function(e){var t=e.order,n=e.handleCancelClick,c=Object(x.b)(),u=Object(r.useState)(!1),i=Object(o.a)(u,2),p=i[0],y=i[1];return a.a.createElement(l.a,{onClick:function(){return y((function(e){return!e}))},style:{padding:20,margin:"10px 0",backgroundColor:"white",maxWidth:500,cursor:"pointer"}},a.a.createElement(d,{orderId:t.id}),a.a.createElement("div",{style:{paddingTop:10}},a.a.createElement(f,null),a.a.createElement(m,{createdAt:"".concat((new Date).toISOString().split("T")[0]),status:"".concat(t.status),price:t.items.reduce((function(e,t){return e+t.price*t.quantity}),0)}),p&&a.a.createElement(b,{items:t.items}),c(t.status,E.a.cancelMyOrder)&&a.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",paddingTop:10}},a.a.createElement(s.a,{onClick:function(){return n(t)},color:"secondary"},"Cancel Order"))))};t.default=function(){var e=Object(c.a)(),t=e.orders,n=e.loading,r=e.hasLoaded,o=Object(c.c)().cancelOrder,l=function(e){return o(e)};return a.a.createElement("div",{style:{display:"flex",placeContent:"center"}},n&&!r&&a.a.createElement(u.a,null),n&&r&&a.a.createElement(i.a,{open:!!n},a.a.createElement(u.a,null)),!n&&a.a.createElement("div",null,t.map((function(e){return a.a.createElement(O,{key:e.id,order:e,handleCancelClick:l})}))),!n&&r&&0===t.length&&a.a.createElement("div",null,"You don't have any orders"))}}}]);
//# sourceMappingURL=7.8f0686d3.chunk.js.map